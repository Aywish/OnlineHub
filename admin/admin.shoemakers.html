<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title class="customer-name">Made in Marikina - Products</title>
    
        <!-- bootstrap and css -->
        <link type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="../css/AdminAccess.css">

        <!--javascript -->
    <script type="text/javascript">
        //popup
        function OpenPopup() {
            document.getElementById("popup_product").style.display = "block";
            document.getElementById("bgoverlay").style.display = "block";
        }
        function ClosePopup() {
            document.getElementById("popup_product").style.display = "none";
            document.getElementById("bgoverlay").style.display = "none";
        }
    </script>
    
        <!-- icons -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.0/font/bootstrap-icons.css">
    
    </head>
    <body>

        <div class="top-level">
            <div class="top-title">
                <h1>Discover shops and shoemakers.</h1>
            </div>
            <div class="top-buttons">
                <label for="add" class="buttonss products-add" onclick="OpenPopup()"">
                    <i class="bi bi-plus-circle"></i>
                    <span>ADD</span>
                </label>
                <br>
                <label for="find" class="buttonss products-find">
                    <i class="bi bi-search"></i>
                        <span>FIND</span>
                </label>
            </div>
        </div>

        
        <!--POPUP-->
        <div class="popup" id="popup_product">
            <div class="popup-scrollable">
                <i class="bi bi-x" onclick="ClosePopup()"></i>
                <div class="popup-content">
                    <div class="profile-picture">
                        <img src="images/logo.png" alt="">
                    </div>
                    
                    <form action="" class="popup-form">
                        <h5>Store Name</h5>
                            <input type="text" placeholder="Full Store Name" class="storeName" id="storename">
                        <h5>Full Name</h5>
                            <input type="text" placeholder="First Name" class="fullName" id="firstname">
                            <input type="text" placeholder="Middle Name" class="fullName" id="middlename">
                            <input type="text" placeholder="Last Name" class="fullName" id="lastname">
                            <input type="text" placeholder="Suffix" class="fullName" id="suffix">
                        <h5>Complete Address</h5>
                            <input type="text" placeholder="House No." class="address" id="houseno" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');">
                            <input type="text" placeholder="Street Name" class="address" id="streetname">
                            <input type="text" placeholder="Baranggay" class="address" id="baranggay">
                            <input type="text" placeholder="City" class="address" id="city">
                            <input type="text" placeholder="Postal Code." class="address" id="postalcode" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');">
                        <h5>Contact Information</h5>
                            <input type="text" placeholder="Mobile Number" class="contact" id="mobilenumber" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');">
                            <input type="text" placeholder="Email Address" class="contact" id="email">
                    </form>
                </div>
            </div>
            <div class="addshoemaker">
                <a href="#" id="addshoemaker">ADD SHOEMAKER</a>
            </div>
        </div>
        <!--END OF POPUP-->

        <div class="table">
            <table id="admin-shmkrview">
                <tr>
                    <th><h4 class="admin-tblHeader">IMAGE</h4></th>
                    <th><h4 class="admin-tblHeader">SHOP NAME</h4></th>
                    <th><h4 class="admin-tblHeader">SHOP OWNER</h4></th>
                    <th><h4 class="admin-tblHeader">ADDRESS</h4></th>
                    <th><h4 class="admin-tblHeader">ACTIONS</h4></th>
                </tr>
                
            </table>
        </div>
        <script>

            var storeName, firstName, middleName, lastName, suffix, houseNo, stName, brgy, city, postalCode, contactNo, email;


            var shmkrReference = firebase.database().ref().child("users/").orderByChild('accountType').equalTo("shoemaker");
            shmkrReference.on("child_added", snap => {
                var shopName = snap.child("name").val();
                var fName = snap.child("firstName").val();
                var lName = snap.child("lastName").val();
                var address = snap.child("address").val();
                var shmkrId = snap.child("uid").val();

                $("#admin-shmkrview").append('<tr><td><img class="admin-image" src="images/user.jpg"></td><td><p>' + shopName + '</p></td><td><p>' + fName + ' ' + lName + '</p></td><td><p>' + address + '</p></td><td><button class="button-actions"><i class="bi bi-eye"></i><span>VIEW</span></button><button class="button-actions"><i class="fa fa-trash" aria-hidden="true"></i><span>DELETE</span></button></td></tr>');
            });


            function readAddForm() {
                storeName = document.getElementById("storename").value;
                firstName = document.getElementById("firstname").value;
                middleName = document.getElementById("middlename").value;
                lastName = document.getElementById("lastname").value;
                suffix = document.getElementById("suffix").value;
                houseNo = document.getElementById("houseno").value;
                stName = document.getElementById("streetname").value;
                brgy = document.getElementById("baranggay").value;
                city = document.getElementById("city").value;
                postalCode = document.getElementById("postalcode").value;
                contactNo = document.getElementById("mobilenumber").value;
                email = document.getElementById("email").value;
            }
        </script>
        

</html>